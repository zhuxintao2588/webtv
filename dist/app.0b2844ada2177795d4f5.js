!function(e){function t(t){for(var a,o,l=t[0],s=t[1],u=t[2],f=0,d=[];f<l.length;f++)o=l[f],r[o]&&d.push(r[o][0]),r[o]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a]);for(c&&c(t);d.length;)d.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],a=!0,l=1;l<n.length;l++){var s=n[l];0!==r[s]&&(a=!1)}a&&(i.splice(t--,1),e=o(o.s=n[0]))}return e}var a={},r={0:0},i=[];function o(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=a,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/v1/";var l=window.webpackJsonp=window.webpackJsonp||[],s=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var c=s;i.push([183,1,2]),n()}({183:function(e,t,n){"use strict";var a=f(n(1)),r=f(n(19)),i=n(49),o=f(n(194)),l=n(21);n(250),n(253);var s=f(n(279)),u=f(n(471)),c=f(n(22));function f(e){return e&&e.__esModule?e:{default:e}}console.log("%c  github: https://github.com/Zack-Bee/hdtv  ","color: #333; \n    font-size: 20px; \n    background-image: linear-gradient(to right, #4facfe, #00f2fe); \n    padding: 10px; \n    border-radius: 20px;");var d=(0,l.withStyles)(null,{withTheme:!0})(function(){return a.default.createElement(a.default.Fragment,null,a.default.createElement(o.default,null),a.default.createElement(i.Route,{path:"/"+c.default.version+"/list/channel/:category",children:function(e){var t=e.match,n=e.history;return t&&a.default.createElement("div",{id:"list"},a.default.createElement(s.default,{category:t.params.category,history:n}))}}),a.default.createElement(i.Route,{path:"/"+c.default.version+"/player/:channel/:timeline*",children:function(e){var t=e.match,n=e.history;return t&&a.default.createElement("div",{id:"player"},a.default.createElement(u.default,{match:t,history:n}))}}),a.default.createElement(i.Route,{path:"/"+c.default.version+"/:page*",render:function(e){var t=e.match.params.page;return void 0===t?a.default.createElement(i.Redirect,{to:"/"+c.default.version+"/list/channel/热门频道"}):t.startsWith("player")||t.startsWith("list")?a.default.createElement(a.default.Fragment,null):a.default.createElement(i.Redirect,{to:"/"+c.default.version+"/list/channel/热门频道"})}}))});r.default.render(a.default.createElement(i.BrowserRouter,null,a.default.createElement(d,null)),document.getElementById("root"))},22:function(e,t){const n="https://hdtv.neu6.edu.cn";e.exports={host:n,channels:`${n}/v1/channels`,details:`${n}/v1/details`,sources:`${n}/v1/sources`,version:"v1",list:`${n}/v1/list`,versionDetail:"1.1.0"}},250:function(e,t,n){var a=n(251);"string"==typeof a&&(a=[[e.i,a,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(82)(a,r);a.locals&&(e.exports=a.locals)},251:function(e,t,n){(e.exports=n(81)(!1)).push([e.i,"a:link, a:focus, a:visited, a:hover {\r\n    color: inherit;\r\n    text-decoration: none;\r\n}\r\n",""])},279:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=P(n(1)),i=P(n(7)),o=n(21),l=P(n(280)),s=P(n(292)),u=P(n(147)),c=P(n(148)),f=P(n(60)),d=P(n(31)),p=P(n(315)),h=P(n(61)),m=P(n(330)),y=P(n(376)),v=P(n(162)),g=P(n(382)),b=P(n(383)),w=P(n(164)),E=P(n(386)),S=P(n(74)),k=P(n(27)),O=(P(n(75)),P(n(165)),P(n(102)),P(n(387))),x=P(n(389)),_=P(n(404)),C=P(n(22));P(n(28)),n(420),P(n(468)),P(n(469)),P(n(470));function P(e){return e&&e.__esModule?e:{default:e}}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var L=function(e,t){return new Promise(function(n,a){fetch(e).then(function(e){e.json().then(function(e){n({id:t,list:e[0].list})},function(e){a(e)})},function(e){a(e)})})},I=((0,o.createMuiTheme)({palette:{primary:{main:S.default[500],dark:S.default[500]}}}),function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),a=(localStorage.getItem("version"),localStorage.getItem("isHidePicture"));return a?a=JSON.parse(a):(a=!1,localStorage.setItem("isHidePicture",JSON.stringify(!1))),n.state={open:!1,category:n.props.category,search:"",isHidePicture:a,currentChannelList:[],categoryList:[],timestamp:Date.now(),filter:"",isCarouselOpen:!1},n.closeDrawer=n.closeDrawer.bind(n),n.openDrawer=n.openDrawer.bind(n),n.setCategory=n.setCategory.bind(n),n.setIsHidePicture=n.setIsHidePicture.bind(n),n.setFilter=n.setFilter.bind(n),n.freshTitle=n.freshTitle.bind(n),n.freshDetail=n.freshDetail.bind(n),n.closeCarousel=n.closeCarousel.bind(n),n.gotoLive=n.gotoLive.bind(n),n.merryChristmas(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),a(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.theme;this.props.width;return r.default.createElement("div",{className:n.root},r.default.createElement(u.default,{position:"absolute",className:(0,i.default)(n.appBar,this.state.open&&n.appBarShift)},r.default.createElement(c.default,{disableGutters:!this.state.open},r.default.createElement(v.default,{title:"显示文字"},r.default.createElement(h.default,{color:"inherit","aria-label":"显示文字",onClick:this.openDrawer,className:(0,i.default)(n.menuButton,this.state.open&&n.hide)},r.default.createElement(m.default,null))),r.default.createElement(d.default,{variant:"title",color:"inherit",noWrap:!0},this.props.category),r.default.createElement("div",{className:n.flexAuto}),r.default.createElement(O.default,{className:n.input,channelList:this.state.currentChannelList,setFilter:this.setFilter}),r.default.createElement("div",{className:n.showPictureButtonMargin},r.default.createElement(h.default,{onClick:function(){e.setIsHidePicture(!e.state.isHidePicture)}},this.state.isHidePicture?r.default.createElement(E.default,null):r.default.createElement(b.default,null))))),r.default.createElement(s.default,{variant:"permanent",classes:{paper:(0,i.default)(n.drawerPaper,!this.state.open&&n.drawerPaperClose)},open:this.state.open},r.default.createElement("div",{className:n.toolbar},r.default.createElement(h.default,{onClick:this.closeDrawer},"rtl"===a.direction?r.default.createElement(g.default,null):r.default.createElement(y.default,null))),r.default.createElement(p.default,null),r.default.createElement(f.default,null,this.state.categoryList.map(function(t){return r.default.createElement(x.default,{key:t.categoryId,name:t.name,isActive:e.state.category===t.name})})),r.default.createElement(p.default,null),r.default.createElement(f.default,null,r.default.createElement(x.default,{key:"101",name:"我的收藏",isActive:"我的收藏"===this.state.category}))),r.default.createElement("article",{className:n.content},r.default.createElement("div",{className:n.toolbar,style:{height:0,minHeight:0}}),r.default.createElement("div",{className:n.container},r.default.createElement(_.default,{isHidePicture:this.state.isHidePicture,channelList:this.state.currentChannelList,cacheNum:this.state.timestamp,filter:this.state.filter})),r.default.createElement("footer",{className:n.footer},r.default.createElement(w.default,{container:!0,alignContent:"space-around"},r.default.createElement(w.default,{item:!0,xs:12,sm:6},r.default.createElement(d.default,{variant:"headline",paragraph:!0,color:"inherit"},"友情链接"),r.default.createElement("a",{href:"http://tv.byr.cn/"},r.default.createElement(d.default,{variant:"subheading",color:"inherit"},"北邮人IPTV直播")),r.default.createElement("a",{href:"http://video.dlut.edu.cn/"},r.default.createElement(d.default,{variant:"subheading",color:"inherit"},"大工媒体服务")),r.default.createElement("a",{href:"http://tv.jlu6.edu.cn/"},r.default.createElement(d.default,{variant:"subheading",color:"inherit"},"吉大电视直播")),r.default.createElement("a",{href:"http://dh.sau.edu.cn/"},r.default.createElement(d.default,{variant:"subheading",color:"inherit"},"沈航媒体服务")),r.default.createElement("a",{href:"http://tv6.ustc.edu.cn/"},r.default.createElement(d.default,{variant:"subheading",color:"inherit"},"中国科大电视直播")),r.default.createElement("a",{href:"http://hdtv.lzu6.edu.cn/"},r.default.createElement(d.default,{variant:"subheading",color:"inherit"},"兰州大学高清电视")),r.default.createElement("a",{href:"http://itv.ahau.edu.cn"},r.default.createElement(d.default,{variant:"subheading",color:"inherit"},"安徽农大网络电视")),r.default.createElement("a",{href:"http://iptv.neusoft.edu.cn"},r.default.createElement(d.default,{variant:"subheading",color:"inherit"},"大连东软信息技术学院IPv6网络电视")),r.default.createElement("a",{href:"http://iptv.tsinghua.edu.cn/"},r.default.createElement(d.default,{variant:"subheading",paragraph:!0,color:"inherit"},"清华大学IPTV"))),r.default.createElement(w.default,{item:!0,xs:12,sm:6},r.default.createElement(d.default,{variant:"headline",paragraph:!0,color:"inherit"},"联系我们"),r.default.createElement(d.default,{variant:"subheading",color:"inherit"},"东北大学网络中心"),r.default.createElement("a",{href:"https://github.com/Zack-Bee/hdtv"},r.default.createElement(d.default,{variant:"subheading",paragraph:!0,color:"inherit"},"Github")),r.default.createElement("a",{href:"https://hdtv.neu6.edu.cn/thx"},r.default.createElement(d.default,{variant:"headline",paragraph:!0,color:"inherit"},"鸣谢")),r.default.createElement("a",{href:"https://hdtv.neu6.edu.cn/faq"},r.default.createElement(d.default,{variant:"headline",paragraph:!0,color:"inherit"},"FAQ")),r.default.createElement("a",{href:"https://hdtv.neu6.edu.cn/index.html"},r.default.createElement(d.default,{variant:"subheading",color:"inherit"},"旧版HDTV")),r.default.createElement("a",{href:"https://hdtv.neu6.edu.cn/soft/neutv.apk"},r.default.createElement(d.default,{variant:"subheading",color:"inherit"},"安卓客户端")))))))}}]),a(t,[{key:"componentDidMount",value:function(){var e=this;fetch(C.default.channels).then(function(t){t.json().then(function(t){e.freshFavoriteListInfo(t),e.setState({categoryList:t},function(){e.freshDetail(),e.getVideoMap(t).then(e.freshTitle)}),e.applySelectCategory()})}),this.timer=setInterval(function(){e.setState({timestamp:Date.now()}),e.freshDetail(),e.getVideoMap(e.state.categoryList).then(e.freshTitle)},12e4)}},{key:"componentDidUpdate",value:function(e){e.category!==this.props.category&&this.applySelectCategory()}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"gotoLive",value:function(){console.log(this.props.history),this.closeCarousel(),this.props.history.push("/"+C.default.version+"/list/channel/校内直播")}},{key:"closeCarousel",value:function(){this.setState({isCarouselOpen:!1})}},{key:"openDrawer",value:function(){this.setState({open:!0})}},{key:"closeDrawer",value:function(){this.setState({open:!1})}},{key:"setCategory",value:function(e){this.setState({category:e})}},{key:"setIsHidePicture",value:function(e){localStorage.setItem("isHidePicture",JSON.stringify(e)),this.setState({isHidePicture:e})}},{key:"setFilter",value:function(e){this.setState({filter:e})}},{key:"freshDetail",value:function(){var e=this,t=this.state.categoryList;fetch(C.default.details).then(function(n){n.json().then(function(n){var a={},r=!0,i=!1,o=void 0;try{for(var l,s=n[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){var u=l.value;a[u.channelId]=u}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}for(var c=0,f=t.length;c<f;c++)for(var d=0,p=t[c].channelList,h=p.length;d<h;d++)p[d].viewerNum=a[p[d].channelId].viewerNum;e.setState({categoryList:t})})}),this.setState({timestamp:Date.now()})}},{key:"freshTitle",value:function(e){var t={},n=Math.floor(Date.now()/1e3);for(var a in e)for(var r=0,i=e[a].length;r<i;r++)if(n<=e[a][r].endTime&&n>=e[a][r].startTime){t[a]=e[a][r].title;break}for(var o=0,l=this.state.categoryList;o<l.length;o++)for(var s=0;s<l[o].channelList.length;s++){var u=l[o].channelList[s];u.title=t[u.channelId]||" "}this.setState({categoryList:this.state.categoryList})}},{key:"freshFavoriteListInfo",value:function(e){var t=this,n=localStorage.getItem("favoriteList");if(n){n=JSON.parse(n);for(var a=function(e,a,r){if("所有频道"===a[e].name)return t.favoriteCategory=[],n.forEach(function(n){for(var r=0;r<a[e].channelList.length;r++)a[e].channelList[r].channelId===n&&t.favoriteCategory.push(a[e].channelList[r])}),"break"},r=0,i=e,o=i.length;r<o;r++){if("break"===a(r,i))break}}else localStorage.setItem("favoriteList",JSON.stringify([])),this.favoriteCategory=[]}},{key:"getVideoMap",value:function(e){return new Promise(function(t){var n=sessionStorage.getItem("saveTime"),a=Number(n),r=new Date(a).getDate(),i=(new Date).getDate(),o=sessionStorage.getItem("videoMap");if(!n||!o||a-Date.now()>24e5||i!==r)for(var l=0,s=e,u=s.length;l<u;l++)"所有频道"===s[l].name&&function(){for(var e=[],n=0;n<s[l].channelList.length;n++){var a=s[l].channelList[n].channelId;e.push(L(C.default.list+"/"+a+"/1",s[l].channelList[n].channelId))}var r={};Promise.all(e).then(function(e){e.forEach(function(e){r[e.id]=e.list}),sessionStorage.setItem("saveTime",Date.now()),sessionStorage.setItem("videoMap",JSON.stringify(r)),t(r)})}();else t(JSON.parse(o))})}},{key:"applySelectCategory",value:function(){if("我的收藏"!==this.props.category){for(var e=0,t=this.state.categoryList,n=t.length;e<n;e++)if(t[e].name===this.props.category)return void this.setState({currentChannelList:t[e].channelList})}else this.setState({currentChannelList:this.favoriteCategory||[]})}},{key:"merryChristmas",value:function(){var e=new Date,t=e.getMonth(),n=e.getDate();11===t&&25==n?document.title="HDTV: Merry Christmas! : )":11==t&&24==n&&(document.title="HDTV: Happy Christmas Eve! : )")}},{key:"happyNewYears",value:function(){var e=new Date,t=e.getFullYear(),n=e.getMonth(),a=e.getDate();0===n&&1==a?document.title="HDTV: 元旦快乐, "+t+"更加精彩":11===n&&31===a&&(document.title="HDTV: 元旦快乐, "+t+"感谢有你")}}]),t}());t.default=(0,l.default)()((0,o.withStyles)(function(e){return{root:{flexGrow:1,height:"100vh",zIndex:1,overflow:"hidden",position:"relative",display:"flex"},appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),backgroundColor:k.default[500]},appBarShift:{marginLeft:240,width:"calc(100% - 240px)",transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginLeft:12,marginRight:36},hide:{display:"none"},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:j({overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:7*e.spacing.unit},e.breakpoints.up("sm"),{width:9*e.spacing.unit}),toolbar:Object.assign({},{display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),content:{flexGrow:1,backgroundColor:e.palette.background.default,padding:"32px "+3*e.spacing.unit+"px "+3*e.spacing.unit+"px "+3*e.spacing.unit+"px",overflowY:"auto",marginTop:56},container:j({minHeight:"calc(100% - 340px)"},e.breakpoints.only("xs"),{minHeight:"0"}),flexAuto:{flex:"1 1 auto"},showPictureButtonMargin:{margin:"0 20px 0 10px"},footer:{background:k.default[500],color:"#fff",marginTop:"40px",padding:"20px 70px 20px 70px"},alignCenter:{display:"flex",justifyContent:"center"},margin:{margin:"8px 0"}}},{withTheme:!0})(I))},387:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=s(n(1)),i=s(n(388)),o=s(n(27)),l=n(21);function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={width:"100px"},n.smaller=n.smaller.bind(n),n.bigger=n.bigger.bind(n),n.showResult=n.showResult.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),a(t,[{key:"render",value:function(){var e=this.props.classes;return r.default.createElement("div",{className:e.root},r.default.createElement(i.default,null),r.default.createElement("input",{onFocus:this.bigger,onBlur:this.smaller,className:e.input,onChange:this.showResult,autoComplete:"off",style:{width:this.state.width}}))}}]),a(t,[{key:"smaller",value:function(){this.setState({width:"100px"})}},{key:"bigger",value:function(){this.setState({width:"150px"})}},{key:"showResult",value:function(e){var t=e.currentTarget.value,n=this.props.channelList;this.props.setFilter(t.trim()),n.filter(function(e){return(e.name+" "+e.title+" "+e.keyWord).includes(t)})}}]),t}();t.default=(0,l.withStyles)(function(e){var t;return{root:(t={},u(t,e.breakpoints.only("xs"),{display:"none"}),u(t,"display","flex"),u(t,"backgroundColor",o.default[400]),u(t,"padding","4px 8px"),u(t,"borderRadius","5px"),t),input:{color:"#fff",border:"none",backgroundColor:o.default[400],font:"inherit",padding:0,outline:"none",transition:"width 0.5s"}}})(c)},389:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=S(n(1)),i=n(49),o=S(n(103)),l=S(n(392)),s=S(n(166)),u=S(n(395)),c=S(n(396)),f=S(n(397)),d=S(n(398)),p=S(n(399)),h=S(n(400)),m=S(n(401)),y=S(n(167)),v=S(n(402)),g=S(n(403)),b=n(21),w=S(n(27)),E=S(n(22));function S(e){return e&&e.__esModule?e:{default:e}}var k={icon:{color:w.default[600]},text:{color:w.default[600]}},O=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),a(t,[{key:"render",value:function(){var e={"所有频道":r.default.createElement(u.default,{classes:this.props.isActive?{root:this.props.classes.icon}:{}}),"热门节目":r.default.createElement(c.default,{classes:this.props.isActive?{root:this.props.classes.icon}:{}}),"热门频道":r.default.createElement(c.default,{classes:this.props.isActive?{root:this.props.classes.icon}:{}}),"央视频道":r.default.createElement(f.default,{classes:this.props.isActive?{root:this.props.classes.icon}:{}}),"中央频道":r.default.createElement(f.default,{classes:this.props.isActive?{root:this.props.classes.icon}:{}}),"地方频道":r.default.createElement(d.default,{classes:this.props.isActive?{root:this.props.classes.icon}:{}}),"卫视频道":r.default.createElement(g.default,{classes:this.props.isActive?{root:this.props.classes.icon}:{}}),"辽宁地区":r.default.createElement(d.default,{classes:this.props.isActive?{root:this.props.classes.icon}:{}}),"电影频道":r.default.createElement(p.default,{classes:this.props.isActive?{root:this.props.classes.icon}:{}}),"校内直播":r.default.createElement(h.default,{classes:this.props.isActive?{root:this.props.classes.icon}:{}}),"最近观看":r.default.createElement(m.default,{classes:this.props.isActive?{root:this.props.classes.icon}:{}}),"我的收藏":r.default.createElement(y.default,{classes:this.props.isActive?{root:this.props.classes.icon}:{}}),"高清频道":r.default.createElement(v.default,{classes:this.props.isActive?{root:this.props.classes.icon}:{}}),default:r.default.createElement(h.default,{classes:this.props.isActive?{root:this.props.classes.icon}:{}})};return r.default.createElement(i.NavLink,{to:"/"+E.default.version+"/list/channel/"+this.props.name},r.default.createElement(o.default,{button:!0,onClick:function(){}},r.default.createElement(l.default,null,e[this.props.name]||e.default),r.default.createElement(s.default,{primary:this.props.name,classes:this.props.isActive?{primary:this.props.classes.text}:{}})))}}]),t}(),x=(0,b.withStyles)(k)(O);t.default=function(e){var t=e.name,n=e.onClick;return r.default.createElement(i.Route,{path:"/"+E.default.version+"/list/channel/"+t,children:function(e){var a=e.match;return r.default.createElement(x,{name:t,isActive:a,onClick:n})}})}},404:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=y(n(1)),i=n(21),o=y(n(405)),l=y(n(407)),s=y(n(409)),u=y(n(164)),c=y(n(411)),f=y(n(51)),d=y(n(104)),p=n(413),h=y(n(22)),m=n(49);function y(e){return e&&e.__esModule?e:{default:e}}var v={root:{cursor:"pointer"},media:{paddingTop:"56.25%"},content:{padding:"8px!important"},icon:{fontSize:"16px"},entering:{opacity:"0!important"},entered:{opacity:"1!important"},exiting:{opacity:"0!important"},exited:{opacity:"0!important"},default:{transition:"opacity 300ms linear",opacity:"1"},firstLineWrapper:{display:"flex",justifyContent:"space-between",color:f.default[600],alignItems:"center"},viewPoepleWrapper:{display:"flex",lineHeight:"16px",fontSize:"16px",color:f.default[500],height:"16px"},title:{color:f.default[700]},channelListWrapper:{transition:"box-shadow 0.3s",boxShadow:"0 3px 0 0 rgba(0, 0, 0, 0.2)","&:hover":{boxShadow:"0 3px 8px 8px rgba(0, 0, 0, 0.2)"}}},g=(0,i.withStyles)(v)(function(e){var t=e.classes;return r.default.createElement(p.Transition,{in:e.isShow,unmountOnExit:!0,timeout:300},function(n){return r.default.createElement(u.default,{item:!0,xs:12,sm:6,md:4,lg:3,classes:{item:t.default+" "+t[n]}},r.default.createElement(m.Link,{to:"/"+h.default.version+"/player/"+e.channelId},r.default.createElement("div",{className:t.channelListWrapper},r.default.createElement(o.default,{classes:{root:t.root}},r.default.createElement(d.default,{in:!e.isHidePicture,timeout:"auto",unmountOnExit:!0},r.default.createElement(s.default,{className:t.media,image:""+h.default.host+e.imageSrc+"?"+e.cacheNum,title:e.name?e.name:"正在加载"})),r.default.createElement(l.default,{classes:{root:t.content}},r.default.createElement("div",{className:t.firstLineWrapper},r.default.createElement("div",null,e.name),r.default.createElement("div",{className:t.viewPoepleWrapper},r.default.createElement(c.default,{classes:{root:t.icon}}),r.default.createElement("span",null,e.viewerNum?e.viewerNum:0))),r.default.createElement("div",{className:t.title},e.title))))))})}),b=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),a(t,[{key:"render",value:function(){var e=this,t=this.props.isHidePicture;return r.default.createElement("div",null,r.default.createElement(u.default,{container:!0,spacing:t?0:24},this.props.channelList.map(function(n){return r.default.createElement(g,{key:n.channelId,isHidePicture:t,name:n.name,title:n.title,cacheNum:e.props.cacheNum,channelId:n.channelId,viewerNum:n.viewerNum,imageSrc:n.snapshotUrl,isShow:(n.name+" "+n.title+" "+n.keyWord).toLowerCase().includes(e.props.filter)})})))}}]),t}();t.default=b},468:function(e,t,n){e.exports=n.p+"party.df41af12856b1d1faecae626cee9a3e3.png"},469:function(e,t,n){e.exports=n.p+"class.81831e296963e1c393273733e28d2d30.png"},470:function(e,t,n){e.exports=n.p+"dance.959abc1cf4efdf0ae234b9a32ab9d5ac.png"},471:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=P(n(1)),i=n(21),o=P(n(147)),l=P(n(148)),s=P(n(31)),u=n(49),c=P(n(162)),f=P(n(61)),d=P(n(27)),p=P(n(28)),h=P(n(172)),m=P(n(173)),y=P(n(174)),v=P(n(175)),g=P(n(176)),b=P(n(59)),w=P(n(477)),E=P(n(478)),S=P(n(490)),k=P(n(496)),O=P(n(498)),x=P(n(505)),_=P(n(506)),C=P(n(22));function P(e){return e&&e.__esModule?e:{default:e}}var j={root:{flexGrow:1,height:"100vh",overflow:"hidden"},flex:{flex:1},menuButton:{marginLeft:-12,marginRight:20},appBar:{backgroundColor:d.default[500]}},L=(0,i.createMuiTheme)({palette:{primary:{main:d.default[500],dark:d.default[500]}}}),I=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={title:"正在加载",sourceList:[],currentSourcePath:"",currentSourceName:"",currentSourceThumbnails:"",currentSourceIndex:"",timeline:"",channel:"",ratio:"",videoList:[],isDialogOpen:!1,isSnackbarOpen:!1},console.log(e),n.setSource=n.setSource.bind(n),n.setRatio=n.setRatio.bind(n),n.playNextVideo=n.playNextVideo.bind(n),n.openDialog=n.openDialog.bind(n),n.closeDialog=n.closeDialog.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),a(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.match;return r.default.createElement("div",{className:t.root},r.default.createElement(o.default,{position:"static",classes:{root:t.appBar}},r.default.createElement(l.default,null,r.default.createElement(c.default,{title:"返回频道列表"},r.default.createElement(u.Link,{to:"/"+C.default.version+"/list/channel/热门频道"},r.default.createElement(f.default,{className:t.menuButton,color:"inherit","aria-label":"Home"},r.default.createElement(w.default,null)))),r.default.createElement(s.default,{variant:"title",color:"inherit",className:t.flex,noWrap:!0},this.state.title),r.default.createElement(O.default,{name:this.state.currentSourceName,setSource:this.setSource,sourceList:this.state.sourceList,channel:n.params.channel}),r.default.createElement(k.default,{channel:n.params.channel}),r.default.createElement(S.default,{color:"inherit",channel:n.params.channel,timeline:this.state.timeline,videoList:this.state.videoList}),r.default.createElement(x.default,{ratio:this.state.ratio,setRatio:this.setRatio}))),r.default.createElement(i.MuiThemeProvider,{theme:L},r.default.createElement(E.default,{path:this.state.currentSourcePath,title:this.state.title,isLive:!Boolean(this.state.timeline),thumbnails:this.state.currentSourceThumbnails,channel:this.state.channel,timeline:this.state.timeline,ratio:this.state.ratio,onPlayEnd:this.openDialog}),r.default.createElement(_.default,null),r.default.createElement(h.default,{open:this.state.isDialogOpen,TransitionComponent:b.default,keepMounted:!0,onClose:this.closeDialog,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description"},r.default.createElement(g.default,{id:"alert-dialog-slide-title"},"是否播放下一个节目?"),r.default.createElement(y.default,null,r.default.createElement(v.default,{id:"alert-dialog-slide-description"},"当前视频已经播放完毕.")),r.default.createElement(m.default,null,r.default.createElement(p.default,{onClick:this.closeDialog,color:"default"},"取消"),r.default.createElement(p.default,{onClick:this.playNextVideo,color:"primary"},"播放")))))}}]),a(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.channel,n=this.props.match.params.timeline,a=JSON.parse(localStorage.getItem(t)),r=0;a&&a.index&&(r=a.index),fetch(C.default.sources+"/"+t+"/"+(n||"")).then(function(a){a.json().then(function(a){r=r<a.sourceList.length?r:0,e.setState({title:a.title,sourceList:a.sourceList,currentSourceName:a.sourceList[r].name,currentSourcePath:a.sourceList[r].path,timeline:n,channel:t,currentSourceThumbnails:C.default.host+a.sourceList[r].thumbnails})})}),this.getVideoList();var i=localStorage.getItem("ratio");i?this.setState({ratio:i}):(this.setState({ratio:"自动"}),localStorage.setItem("ratio","自动"))}},{key:"componentDidUpdate",value:function(e,t){var n=this,a=this.props.match.params.channel,r=this.props.match.params.timeline,i=e.match.params.channel,o=e.match.params.timeline;if(a!==i||r!==o){this.getVideoList();var l=JSON.parse(localStorage.getItem(a)),s=0;l&&l.index&&(s=l.index),fetch(C.default.sources+"/"+a+"/"+(r||"")).then(function(e){e.json().then(function(e){s=s<e.sourceList.length?s:0,n.setState({title:e.title,sourceList:e.sourceList,currentSourceName:e.sourceList[s].name,currentSourcePath:e.sourceList[s].path,timeline:r,channel:a,currentSourceThumbnails:C.default.host+e.sourceList[s].thumbnails})})}),this.state.ratio!==t.ratio&&localStorage.setItem("ratio",this.state.ratio)}}},{key:"openDialog",value:function(){if(document.exitFullscreen(),this.state.timeline&&this.state.timeline.includes("-"))for(var e=this.state.timeline.split("-")[1],t=this.state.videoList.slice().reverse(),n=0,a=t.length;n<a;n++)for(var r=0,i=t[n].list,o=i.length;r<o;r++)if(e<=i[r].endTime){if(r===o-1){if(n===a-1)return;if(1e3*t[n+1].list[0].endTime>=Date.now())return}else if(1e3*i[r+1].endTime>=Date.now())return;return void this.setState({isDialogOpen:!0})}}},{key:"closeDialog",value:function(){this.setState({isDialogOpen:!1})}},{key:"setSource",value:function(e,t,n,a){this.setState({currentSourceName:e,currentSourcePath:t,currentSourceThumbnails:n,currentSourceIndex:a});var r=this.props.match.params.channel,i=JSON.parse(localStorage.getItem(r));i=i||{},localStorage.setItem(r,JSON.stringify(Object.assign({},i,{index:a})))}},{key:"playNextVideo",value:function(){if(console.log("here"),console.log(this.state.timeline),console.log(this.state.channel),this.state.timeline&&this.state.timeline.includes("-"))for(var e=this.state.timeline.split("-")[1],t=this.state.videoList.slice().reverse(),n=this.state.channel,a=0,r=t.length;a<r;a++)for(var i=0,o=t[a].list,l=o.length;i<l;i++)if(e<=o[i].endTime){if(i===l-1){if(a!==r-1){var s=t[a+1].list[0];1e3*s.endTime<Date.now()&&this.props.history.push("/"+C.default.version+"/player/"+n+"/"+s.startTime+"-"+s.endTime)}}else 1e3*o[i+1].endTime<Date.now()&&this.props.history.push("/"+C.default.version+"/player/"+n+"/"+o[i+1].startTime+"-"+o[i+1].endTime);return void this.closeDialog()}}},{key:"setRatio",value:function(e){this.setState({ratio:e})}},{key:"getVideoList",value:function(){var e=this;fetch(C.default.list+"/"+this.props.match.params.channel+"/7").then(function(t){t.json().then(function(t){e.setState({videoList:t.reverse()})})})}}]),t}();t.default=(0,i.withStyles)(j)(I)},478:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=b(n(1)),i=b(n(27)),o=n(21),l=b(n(28)),s=b(n(172)),u=b(n(173)),c=b(n(174)),f=b(n(175)),d=b(n(176)),p=b(n(59)),h=b(n(479)),m=b(n(480)),y=b(n(481));n(482);var v=b(n(487)),g=b(n(488));b(n(22));function b(e){return e&&e.__esModule?e:{default:e}}window.Hls=h.default,(0,g.default)(v.default);var w=function(){for(var e=navigator.userAgent,t=new Array("Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"),n=!0,a=0;a<t.length;a++)if(e.indexOf(t[a])>0){n=!1;break}return n}(),E=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={sourceList:[],currentSourcePath:"",currentSourceName:"",isDialogOpen:!1},n.savedInfo={},n.closeDialog=n.closeDialog.bind(n),n.continuePlayProcess=n.continuePlayProcess.bind(n),n.keyupHandler=n.keyupHandler.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),a(t,[{key:"render",value:function(){var e=this;return r.default.createElement(r.default.Fragment,null,r.default.createElement("style",null,"\n                    #playerContainer .fp-color {\n                        background-color: "+i.default[500]+";\n                    }\n                    #playerContainer .fp-bar, #playerContainer .fp-volumebar {\n                        cursor: pointer;\n                    }\n                    "),r.default.createElement("div",{id:"playerContainer",ref:function(t){e.playerNode=t},className:this.props.classes.player+" fp-mute"}),r.default.createElement(s.default,{open:this.state.isDialogOpen,TransitionComponent:p.default,keepMounted:!0,onClose:this.closeDialog,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description"},r.default.createElement(d.default,{id:"alert-dialog-slide-title"},"是否跳转到上次播放的进度?"),r.default.createElement(c.default,null,r.default.createElement(f.default,{id:"alert-dialog-slide-description"},"我们检测到你的本地存储中有此节目的播放记录")),r.default.createElement(u.default,null,r.default.createElement(l.default,{onClick:this.closeDialog,color:"default"},"取消"),r.default.createElement(l.default,{onClick:this.continuePlayProcess,color:"primary"},"跳转"))))}}]),a(t,[{key:"componentDidMount",value:function(){console.log("mount"),document.addEventListener("keyup",this.keyupHandler)}},{key:"componentDidUpdate",value:function(e){var t=this;e.ratio!==this.props.ratio&&this.applyRatio(this.props.ratio),this.props.path&&this.props.path!==e.path&&(this.player&&(this.player.engine&&this.player.unload(),this.player.shutdown()),console.log("update"),this.player=function(e,t,n,a,r){var i={share:!1,autoplay:!0,clip:{sources:[{type:"application/x-mpegurl",src:n}]},live:t,keyboard:!1,chromecast:!1,swf:m.default,swfHls:y.default,hlsjs:{xhrSetup:function(e){e.withCredentials=!1}},native_fullscreen:!0};return w||(i.clip.title=a),t||(i.clip.thumbnails={template:r,interval:1,startIndex:1,preload:!1}),(0,v.default)(e,i)}(this.playerNode,this.props.isLive,this.props.path,this.props.title,this.props.thumbnails),this.savedInfo=JSON.parse(localStorage.getItem(this.props.channel)),this.player.on("ready",function(){t.props.timeline&&t.savedInfo&&t.savedInfo.timeline===t.props.timeline&&t.savedInfo.time>0&&t.setState({isDialogOpen:!0}),t.applyRatio(t.props.ratio),document.querySelector(".fp-player video").addEventListener("ended",t.props.onPlayEnd)}),clearInterval(this.timer),this.props.timeline&&(this.timer=setInterval(function(){var e=Object.assign({},t.savedInfo,{time:t.player.video.time,timeline:t.props.timeline});localStorage.setItem(t.props.channel,JSON.stringify(e))},1e4)))}},{key:"componentWillUnmount",value:function(){console.log("unmount"),document.removeEventListener("keyup",this.keyupHandler);var e=Object.assign({},this.savedInfo,{time:this.player.video.time,timeline:this.props.timeline});localStorage.setItem(this.props.channel,JSON.stringify(e)),console.log("player will unmount");var t=v.default.engine("hlsjs-lite");t&&t.hls&&(console.log("hls stopLoad"),t.hls.stopLoad()),this.player&&this.player.shutdown();var n=document.querySelector("#playerContainer video");n&&(n.src="",n.load()),clearInterval(this.timer)}},{key:"closeDialog",value:function(){this.setState({isDialogOpen:!1})}},{key:"continuePlayProcess",value:function(){this.savedInfo&&this.player.seek(this.savedInfo.time),this.closeDialog()}},{key:"applyRatio",value:function(e){var t=document.querySelector(".fp-player");if(t)switch(localStorage.setItem("ratio",e),e){case"自动":t.querySelector("video").style["object-fit"]="",Object.assign(t.style,{margin:null,height:null,width:null,left:null,right:null});break;case"铺满":t.querySelector("video").style["object-fit"]="fill",Object.assign(t.style,{height:"100%",width:"100%",margin:"0 auto"});break;case"16:9":t.querySelector("video").style["object-fit"]="fill",Object.assign(t.style,{margin:"0 auto",left:0,right:0,height:"100%",width:t.clientHeight/9*16+"px"});break;case"4:3":t.querySelector("video").style["object-fit"]="fill",Object.assign(t.style,{margin:"0 auto",left:0,right:0,height:"100%",width:t.clientHeight/3*4+"px"});break;case"3:2":t.querySelector("video").style["object-fit"]="fill",Object.assign(t.style,{margin:"0 auto",left:0,right:0,height:"100%",width:t.clientHeight/2*3+"px"});break;default:t.querySelector("video").style["object-fit"]="",Object.assign(t.style,{margin:null,height:null,width:null,left:null,right:null})}}},{key:"keyupHandler",value:function(e){if(this.player){var t=JSON.parse(localStorage.getItem("volume"));switch(e.key){case"ArrowUp":null===t?(this.player.volume(1),localStorage.setItem("volume",1)):(t=Math.min(1,Number(t)+.1),this.player.volume(t));break;case"ArrowDown":null===t?this.player.volume(.9):(t=Math.max(0,t-.1),this.player.volume(t));break;case"ArrowLeft":this.player.seek(!1);break;case"ArrowRight":this.player.seek(!0);break;case" ":this.player.toggle()}}}}]),t}();t.default=(0,o.withStyles)(function(e){return{player:function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({height:"calc(100vh - 64px)",width:"100%",overflow:"hidden"},e.breakpoints.only("xs"),{height:"calc(100vh - 56px)"})}})(E)},488:function(e,t,n){"use strict";(function(e){var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};
/*!
   Thumbnail image plugin for Flowplayer HTML5
   Copyright (c) 2015-2017, Flowplayer Drive Oy
   Released under the MIT License:
   http://www.opensource.org/licenses/mit-license.php
   requires:
   - Flowplayer HTML5 version 6.x or greater
   revision: $GIT_ID$
*/
/*!
   Thumbnail image plugin for Flowplayer HTML5
   Copyright (c) 2015-2017, Flowplayer Drive Oy
   Released under the MIT License:
   http://www.opensource.org/licenses/mit-license.php
   requires:
   - Flowplayer HTML5 version 6.x or greater
   revision: $GIT_ID$
*/
!function(){var n=function(e){e(function(t,n){var a=e.common,r=e.bean,i=e.extend,o=e.support,l=a.find(".fp-timeline",n)[0],s=a.find(".fp-time"+(0===e.version.indexOf("6.")?"line-tooltip":"stamp"),n)[0];!o.touch&&o.inlineVideo&&t.on("ready",function(e,o,u){r.off(n,".thumbnails"),a.css(s,{width:"",height:"","background-image":"","background-repeat":"","background-size":"","background-position":"",border:"","text-shadow":""});var c=i({lazyload:!0,responsive:!0},o.conf.thumbnails,u.thumbnails),f=c.template,d=f&&f.indexOf("{time}")<0;if(f&&(!d||c.rows&&c.columns&&c.width&&c.height)){var p=d?c.height/c.rows:c.height||80,h=a.find(".fp-engine",n)[0],m=(u.height||a.height(h))/(u.width||a.width(h)),y=d?c.width/c.columns:p/m,v=c.interval||1,g=c.time_format||function(e){return e},b="number"==typeof c.startIndex?c.startIndex:1,w=c.lazyload&&!d?new Image:null;c.preload&&function(e,t){e=Math.floor(e/v+t),function n(){if(!(t>e)){var a=new Image;a.src=f.replace("{time}",g(t)),a.onload=function(){t+=1,n()}}}()}(u.duration,b),r.on(n,"mousemove.thumbnails",".fp-timeline",function(e){var o,u=((e.pageX||e.clientX)-a.offset(l).left)/a.width(l),h=Math.round(u*t.video.duration),m=function(){var e=c.responsive&&a.hasClass(n,"is-small")?.7:c.responsive&&a.hasClass(n,"is-tiny")?.6:1,t={width:y*e+"px",height:p*e+"px","background-image":"url('"+o+"')","background-repeat":"no-repeat",border:"1px solid #333","text-shadow":"1px 1px #000"};if(d){var r=Math.floor(h%c.columns)*-y-(y-y*e)/2,l=Math.floor(h/c.columns)*-p-(p-p*e)/2;t["background-position"]=r+"px "+l+"px"}else i(t,{"background-size":"cover","background-position":"center"});a.css(s,t)};h<0||h>Math.round(t.video.duration)||(h=Math.floor(h/v),o=f.replace("{time}",g(h+b)),c.lazyload&&!d?(w.src=o,r.on(w,"load",m)):m())})}})})};"object"===t(e)&&e.exports?e.exports=n:window.flowplayer&&n(window.flowplayer)}()}).call(this,n(489)(e))},490:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=f(n(1)),i=f(n(28)),o=f(n(104)),l=f(n(60)),s=n(21),u=f(n(177)),c=f(n(495));f(n(22));function f(e){return e&&e.__esModule?e:{default:e}}var d=function(t){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={isListShow:!1,openIndex:-1,videoList:[],now:Math.floor(Date.now()/1e3)},t.openList=t.openList.bind(t),t.closeList=t.closeList.bind(t),t.toggleList=t.toggleList.bind(t),t.setOpenIndex=t.setOpenIndex.bind(t),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,r.default.Component),a(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.timeline,s="";return a&&a.includes("-")&&(s=a.split("-")[0]),r.default.createElement("div",null,r.default.createElement(i.default,{color:"inherit","aria-haspopup":"true",onClick:this.toggleList},"节目列表"),r.default.createElement(o.default,{in:this.state.isListShow,timeout:"auto",unmountOnExit:!0},r.default.createElement("div",{className:n.list},r.default.createElement(u.default,{onClickAway:this.closeList},r.default.createElement(l.default,{disablePadding:!0,className:n.header},this.props.videoList.map(function(t,n){return r.default.createElement(c.default,{list:t,now:e.state.now,key:e.props.channel+"-"+t.date+"\n                                            ",setOpenIndex:e.setOpenIndex,channel:e.props.channel,index:n,currentStartTime:s,openIndex:e.state.openIndex})}))))))}}]),a(n,[{key:"openList",value:function(){this.setState({isListShow:!0})}},{key:"closeList",value:function(){this.setState({isListShow:!1})}},{key:"toggleList",value:function(){this.setState({isListShow:!this.state.isListShow,now:Math.floor(Date.now()/1e3)})}},{key:"setOpenIndex",value:function(e){this.state.openIndex===e?this.setState({openIndex:-1}):this.setState({openIndex:e})}},{key:"componentDidMount",value:function(){var t=this;this.timer=e(function(){t.setState({now:Math.floor(Date.now()/1e3)})},18e4)}}]),n}();t.default=(0,s.withStyles)(function(e){return{header:{width:"200px"},nested:{paddingLeft:5*e.spacing.unit,fontSize:"14px",paddingTop:"3px",paddingBottom:"3px",lineHeight:"1.2em"},list:function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({position:"fixed",top:"64px",right:"24px",backgroundColor:e.palette.background.paper,zIndex:"1150",maxHeight:"300px",overflowY:"auto"},e.breakpoints.only("xs"),{top:"56px"})}})(d)}).call(this,n(491).setImmediate)},495:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=p(n(1)),r=n(21),i=p(n(103)),o=p(n(104)),l=p(n(166)),s=n(49),u=p(n(60)),c=p(n(22)),f=p(n(51)),d=p(n(27));function p(e){return e&&e.__esModule?e:{default:e}}t.default=(0,r.withStyles)(function(e){return{nested:{paddingLeft:5*e.spacing.unit,fontSize:"14px",paddingTop:"3px",paddingBottom:"3px",lineHeight:"1.2em"},willPlayVideo:{color:f.default[500]},playingVideo:{color:d.default[500]}}})(function(e){var t=e.classes;return a.default.createElement(a.default.Fragment,null,a.default.createElement(i.default,{divider:!0,button:!0,onClick:function(){e.setOpenIndex(e.index)}},a.default.createElement(l.default,{primary:e.list.date})),a.default.createElement(o.default,{in:e.openIndex===e.index,timeout:"auto",unmountOnExit:!0},a.default.createElement(u.default,{component:"div",disablePadding:!0},e.list.list.map(function(n){var r=new Date(1e3*n.startTime),o=r.getHours(),u=r.getMinutes(),f=!1;if(e.currentStartTime==n.startTime&&(f=!0),e.now>n.endTime)return a.default.createElement(s.Link,{to:"/"+c.default.version+"/player/"+e.channel+"/"+n.startTime+"-"+n.endTime,key:e.channel+"-"+n.startTime},a.default.createElement(i.default,{divider:!0,button:!0,className:t.nested},a.default.createElement(l.default,{classes:{primary:f&&t.playingVideo},primary:String(o).padStart(2,"0")+":"+String(u).padStart(2,"0")+" "+n.title})));var d=!1;return e.now>=n.startTime&&e.now<n.endTime&&!e.currentStartTime&&(d=!0),a.default.createElement(i.default,{key:e.channel+"-"+n.startTime,divider:!0,button:!0,className:t.nested},a.default.createElement(l.default,{classes:{primary:d?t.playingVideo:t.willPlayVideo},primary:String(o).padStart(2,"0")+":"+String(u).padStart(2,"0")+" "+n.title}))}))))})},496:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=s(n(1)),i=s(n(167)),o=s(n(497)),l=s(n(61));function s(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isFavorite:!1},n.toggleFavorite=n.toggleFavorite.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),a(t,[{key:"render",value:function(){return r.default.createElement(l.default,{onClick:this.toggleFavorite,color:"inherit"},this.state.isFavorite?r.default.createElement(i.default,null):r.default.createElement(o.default,null))}}]),a(t,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("favoriteList");e?(this.favorateList=JSON.parse(e),this.favorateList.includes(this.props.channel)&&this.setState({isFavorite:!0})):(this.favorateList=[],localStorage.setItem("favoriteList",JSON.stringify([])))}},{key:"toggleFavorite",value:function(){var e=this.props.channel;this.state.isFavorite?(this.favorateList.splice(this.favorateList.indexOf(e),1),localStorage.setItem("favoriteList",JSON.stringify(this.favorateList)),this.setState({isFavorite:!1})):(this.favorateList.includes(e)||this.favorateList.push(e),localStorage.setItem("favoriteList",JSON.stringify(this.favorateList)),this.setState({isFavorite:!0}))}}]),t}();t.default=u},498:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=u(n(1)),i=u(n(28)),o=u(n(178)),l=u(n(179)),s=u(n(22));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={anchorEl:null},n.handleClick=n.handleClick.bind(n),n.handleClose=n.handleClose.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),a(t,[{key:"handleClick",value:function(e){this.setState({anchorEl:e.currentTarget})}},{key:"handleClose",value:function(){this.setState({anchorEl:null})}},{key:"render",value:function(){var e=this,t=this.state.anchorEl;return r.default.createElement("div",null,r.default.createElement(i.default,{"aria-owns":t?"source-menu":null,"aria-haspopup":"true",onClick:this.handleClick,color:"inherit"},this.props.name),r.default.createElement(o.default,{id:"source-menu",anchorEl:t,open:Boolean(t),onClose:this.handleClose},this.props.sourceList.map(function(t,n){return r.default.createElement(l.default,{key:t.path,onClick:function(){e.handleClose(),e.props.setSource(t.name,t.path,s.default.host+t.thumbnails,n)}},t.name)})))}}]),t}();t.default=c},505:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=s(n(1)),i=s(n(28)),o=s(n(178)),l=s(n(179));s(n(22));function s(e){return e&&e.__esModule?e:{default:e}}var u=["自动","铺满","16:9","4:3","3:2"],c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={anchorEl:null},n.handleClick=n.handleClick.bind(n),n.handleClose=n.handleClose.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),a(t,[{key:"handleClick",value:function(e){this.setState({anchorEl:e.currentTarget})}},{key:"handleClose",value:function(){this.setState({anchorEl:null})}},{key:"render",value:function(){var e=this,t=this.state.anchorEl;return r.default.createElement("div",null,r.default.createElement(i.default,{"aria-owns":t?"ratio-menu":null,"aria-haspopup":"true",onClick:this.handleClick,color:"inherit"},this.props.ratio),r.default.createElement(o.default,{id:"ratio-menu",anchorEl:t,open:Boolean(t),onClose:this.handleClose},u.map(function(t){return r.default.createElement(l.default,{key:t,onClick:function(){e.handleClose(),e.props.setRatio(t)}},t)})))}}]),t}();t.default=c},506:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(1),i=g(r),o=g(n(7)),l=g(n(507)),s=g(n(508)),u=g(n(509)),c=g(n(510)),f=g(n(168)),d=g(n(102)),p=g(n(61)),h=g(n(511)),m=g(n(180)),y=g(n(514)),v=n(21);function g(e){return e&&e.__esModule?e:{default:e}}var b={success:l.default,warning:y.default,error:s.default,info:u.default},w=function(e){var t=e.classes,n=e.className,a=e.message,r=e.onClose,l=e.type,s=b[l];return i.default.createElement(m.default,{className:(0,o.default)(t[l],n),"aria-describedby":"client-snackbar",message:i.default.createElement("span",{id:"client-snackbar",className:t.message},i.default.createElement(s,{className:(0,o.default)(t.icon,t.iconType)}),a),action:[i.default.createElement(p.default,{key:"close","aria-label":"Close",color:"inherit",className:t.close,onClick:r},i.default.createElement(c.default,{className:t.icon}))]})};w=(0,v.withStyles)(function(e){return{success:{backgroundColor:f.default[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.dark},warning:{backgroundColor:d.default[700]},icon:{fontSize:20},iconType:{opacity:.9,marginRight:e.spacing.unit},message:{display:"flex",alignItems:"center"}}})(w);var E=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),a(t,[{key:"render",value:function(){return i.default.createElement(h.default,{anchorOrigin:{vertical:this.props.vertical||"top",horizontal:this.props.horizontal||"center"},open:this.props.open,autoHideDuration:this.props.autoHideDuration||6e3,onClose:this.props.onClose},i.default.createElement(w,{onClose:this.props.onClose,type:this.props.type,message:this.props.message}))}}]),t}();t.default=E}});